load("@rules_cc//cc:defs.bzl", "cc_library")

package(default_visibility = ["//visibility:public"])

cc_library(
    name = "extern",
    srcs = [
        "stb_image.cpp",
    ] + select({
        "@bazel_tools//src/conditions:windows": ["glad/src/glad.c"],
        "//conditions:default": [],
    }),
    hdrs =
        glob(
            [
                "glm/**/*.hpp",
                "glm/**/*.h",
                "glm/**/*.inl",
                "stb/stb_image.h",
            ],
        ) + select({
            "@bazel_tools//src/conditions:windows": [
                "glad/include/glad/glad.h",
                "glad/include/KHR/khrplatform.h",
            ],
            "//conditions:default": [],
        }),
    # This is needed to suppress warnings introduced by stb_image.h
    copts = ["-Wno-sign-compare -Wno-unused-but-set-variable"],
    linkopts = select({
        "@bazel_tools//platforms:windows": ["-lsfml-window -lsfml-system -lopengl32 -lwinmm -lgdi32"],
        "@bazel_tools//platforms:linux": ["-lsfml-window -lsfml-system -lGL"],
    }),
)
